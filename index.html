<!DOCTYPE html>
<html>
  <head>
    <title>A.js Example with Persistent Model</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="trackingMethod: best; debugUIEnabled: false; sourceType: webcam;">
      <!-- Define a marker -->
      <a-marker preset="hiro">
        <!-- Add a 3D object (a GLTF model with animation and rigging) -->
        <a-entity gltf-model="./rigged_animation.glb"
                  scale="0.02 0.02 0.02"
                  position="0 0 0"
                  rotation="0 180 0"
                  animation-mixer>
        </a-entity>
        <!-- Set rotation attribute to rotate the model -->
      </a-marker>

      <!-- Use hit-testing for persistence -->
      <a-entity id="hitTest" hit-testing></a-entity>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      // Wait for scene to load
      document.querySelector('a-scene').addEventListener('loaded', function () {
        var sceneEl = document.querySelector('a-scene');

        // Handle hit-test result
        sceneEl.addEventListener('touchstart', function (event) {
          // Get hit-test result
          var hitTestResult = event.detail.intersection && event.detail.intersection.object.el;

          if (hitTestResult) {
            // Append model to hit-test position
            hitTestResult.appendChild(document.querySelector('[gltf-model]'));
          }
        });
      });
    </script>
  </body>
</html>
